<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<title>Welcome {{ user.nickname }}</title>
			<!-- The following script directive is included for your convenience -->
			<!-- socialize.js script should only be included once -->
			<script type="text/javascript" src="http://cdn.gigya.com/js/socialize.js?apiKey=2_Y82PzwJ_chSFImHXaIDJClnLyJzmk-VFOavSsaNTzl6m901s_NNxRAS0xJ3bd3_N"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script src="/static/shared.js"></script>

	</head>
	<body>

		<div style="float:left; margin:0px 10px; padding:10px; border:2px solid blue;">
			<p>
				Welcome!
				<p>You authenticated with <span id="loginProvider"> </span></p>
				<div id="UserInfo">
	       <div id="divUserName">{{ user.nickname }}</div>
	       <div id="divUserPhoto"><img id="imgUserPhoto" src="{{user.thumbnailURL}}"/></div>
				 <div id="divLoginCount">Counts: {{count}}</div>
				 <div id="divUserEmail">Email: {{ user.email }}</div>

				 <div id="sharingUI"></div>

	    </div>
			</p>
		</div>


		<div id="manageAndLogout" style="width:400px; height:200px; float:left; margin:0px 10px; padding:10px;">
			<script>


			gigya.socialize.addEventHandlers({
				onConnectionAdded:connectionAdded
			 }
			);

			gigya.socialize.showAddConnectionsUI({"containerID":"loginProvider", "width":400});


			// Constructing a UserAction Object
		var act = new gigya.socialize.UserAction();
		act.setTitle("Hey I'm sharing something!");  // Setting the Title
		act.setDescription("This is what I'm sharing");   // Setting Description
		 
		// Adding a Media Item (image)
		 
		var params =
		{		containerID:"sharingUI",
		    userAction:act,
				enabledProviders:"{{user.providers|join(', ')}}"
		    ,showMoreButton: true // Enable the "More" button and screen
		    ,showEmailButton: true // Enable the "Email" button and screen
		};
			gigya.socialize.showShareUI(params);

			</script>
			<!-- YOUR MISSION:
				1) Add the Gigya connect component, showAddConnectionsUI, in a containing div
				2) From the events generated by the connection component, indicate the connected
				   social network providers on the page (hint: you will need to use addEventHandlers)
				3) Modify the logout (below) to use the Gigya logout API call
				4) Bonus points: add a sharing experience, either via publishUserAction or showShareUI

				(Note: while implementation is important, layout and user experience also matters.)
			-->
			<input type="button" onclick="gigya.socialize.logout();window.location.replace('/a'); return false;" value="Logout and return to the login page">
		</div>
	</body>
</html>
